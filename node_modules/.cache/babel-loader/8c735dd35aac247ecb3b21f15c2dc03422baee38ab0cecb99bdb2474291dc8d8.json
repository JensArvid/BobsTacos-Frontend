{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { toast } from \"react-hot-toast\";\nconst initialState = {\n  cart: [],\n  wish: [],\n  cartItems: [],\n  quantity: 0,\n  amount: 0,\n  isLoggedIn: false\n};\nconst ShoppingCart = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    AddCart: (state, action) => {\n      const find = state.cart.findIndex(item => item.id === action.payload.id);\n      if (find >= 0) {\n        state.cart[find].quantity += 1;\n      } else {\n        const tempvar = {\n          ...action.payload,\n          quantity: 1\n        };\n        state.cart.push(tempvar);\n      }\n      ;\n    },\n    removeCart(state, action) {\n      const nextCartItems = state.cart.filter(cartItem => cartItem.id !== action.payload.id);\n      state.cart = nextCartItems;\n    },\n    AddWishlist: (state, action) => {\n      if (state.isLoggedIn) {\n        // Check if user is logged in\n        const val = state.wish.findIndex(item => item.id === action.payload.id);\n        if (val >= 0) {\n          state.wish[val].quantity += 1;\n        } else {\n          const temp = {\n            ...action.payload,\n            quantity: 1\n          };\n          state.wish.push(temp);\n        }\n        ;\n      } else {\n        toast.error(\"You must login to add to favorites\"); // Show error message if user is not logged in\n      }\n    },\n\n    setLoggedInStatus: (state, action) => {\n      // Define setLoggedInStatus action\n      state.isLoggedIn = action.payload;\n    },\n    removeWishlist(state, action) {\n      const nextWishItems = state.wish.filter(cartItem => cartItem.id !== action.payload.id);\n      state.wish = nextWishItems;\n    },\n    decreaseCart(state, action) {\n      const itemIndex = state.cart.findIndex(carts => carts.id === action.payload.id);\n      if (state.cart[itemIndex].quantity > 1) {\n        state.cart[itemIndex].quantity -= 1;\n      } else if (state.cart[itemIndex].quantity === 1) {\n        const nextCartItems = state.cart.filter(carts => carts.id !== action.payload.id);\n        state.cart = nextCartItems;\n        toast.success(\"Item Removed!\");\n      }\n    },\n    clearCart(state, action) {\n      state.cart = [];\n      state.amount = 0;\n      // toast.success(\"Cart Is Empty!\")\n    },\n\n    getTotals(state, action) {\n      let {\n        total,\n        totalQuantity\n      } = state.cart.reduce((cartTotal, carts) => {\n        const {\n          price,\n          quantity\n        } = carts;\n        const itemTotal = price * quantity;\n        cartTotal.total += itemTotal;\n        cartTotal.totalQuantity += quantity;\n        return cartTotal;\n      }, {\n        total: 0,\n        totalQuantity: 0\n      });\n      state.quantity = totalQuantity;\n      state.amount = total;\n    }\n  }\n});\nexport const {\n  AddCart,\n  removeCart,\n  AddWishlist,\n  removeWishlist,\n  decreaseCart,\n  clearCart,\n  getTotals\n} = ShoppingCart.actions;\nexport default ShoppingCart.reducer;","map":{"version":3,"names":["createSlice","toast","initialState","cart","wish","cartItems","quantity","amount","isLoggedIn","ShoppingCart","name","reducers","AddCart","state","action","find","findIndex","item","id","payload","tempvar","push","removeCart","nextCartItems","filter","cartItem","AddWishlist","val","temp","error","setLoggedInStatus","removeWishlist","nextWishItems","decreaseCart","itemIndex","carts","success","clearCart","getTotals","total","totalQuantity","reduce","cartTotal","price","itemTotal","actions","reducer"],"sources":["C:/Users/Mali11/Desktop/BobsTacos-Frontend/src/components/redux/ShoppingCart.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { toast } from \"react-hot-toast\";\n\nconst initialState = {\n    cart: [],\n    wish: [],\n    cartItems: [],\n    quantity: 0,\n    amount: 0,\n    isLoggedIn: false,\n}\n\nconst ShoppingCart = createSlice({\n    name: \"user\",\n    initialState,\n    reducers:{\n        AddCart: (state, action) =>{\n            const find = state.cart.findIndex((item)=> item.id === action.payload.id);\n            if(find >= 0){\n                state.cart[find].quantity+=1;\n            }else{\n                const tempvar = {...action.payload, quantity:1}\n                state.cart.push(tempvar);\n            };\n        },\n        removeCart(state, action){\n           const nextCartItems =  state.cart.filter(\n                (cartItem) => cartItem.id !== action.payload.id\n            );\n            state.cart = nextCartItems;\n        },\n        AddWishlist: (state, action) =>{\n            if (state.isLoggedIn) { // Check if user is logged in\n                const val = state.wish.findIndex((item)=> item.id === action.payload.id);\n                if(val >= 0){\n                    state.wish[val].quantity+=1;\n                }else{\n                    const temp = {...action.payload, quantity:1}\n                    state.wish.push(temp);\n                };\n            } else {\n                toast.error(\"You must login to add to favorites\"); // Show error message if user is not logged in\n            }\n        },\n        setLoggedInStatus: (state, action) => { // Define setLoggedInStatus action\n            state.isLoggedIn = action.payload;\n        },\n        removeWishlist(state, action){\n            const nextWishItems =  state.wish.filter(\n                 (cartItem) => cartItem.id !== action.payload.id\n             );\n             state.wish = nextWishItems;\n        },\n        decreaseCart(state, action){\n            const itemIndex = state.cart.findIndex(\n                carts => carts.id === action.payload.id\n            )\n            if(state.cart[itemIndex].quantity > 1){\n                state.cart[itemIndex].quantity -= 1\n            }else if(state.cart[itemIndex].quantity === 1){\n                const nextCartItems =  state.cart.filter(\n                    (carts) => carts.id !== action.payload.id\n                );\n                state.cart = nextCartItems;\n                toast.success(\"Item Removed!\")\n            }\n        },\n        clearCart(state, action){\n            state.cart = []\n            state.amount = 0;\n            // toast.success(\"Cart Is Empty!\")\n        },\n        getTotals(state, action){\n            let { total, totalQuantity } = state.cart.reduce(\n                (cartTotal, carts) => {\n                    const { price, quantity } = carts;\n                    const itemTotal = price * quantity;\n\n                    cartTotal.total += itemTotal;\n                    cartTotal.totalQuantity += quantity;\n\n                    return cartTotal;\n                },\n                {\n                    total: 0,\n                    totalQuantity: 0,\n                }\n            );\n\n            state.quantity = totalQuantity;\n            state.amount = total;\n        }\n    }\n})\n\nexport const  {AddCart, removeCart, AddWishlist, removeWishlist, decreaseCart, clearCart, getTotals} = ShoppingCart.actions;\nexport default ShoppingCart.reducer"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,iBAAiB;AAEvC,MAAMC,YAAY,GAAG;EACjBC,IAAI,EAAE,EAAE;EACRC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAE,EAAE;EACbC,QAAQ,EAAE,CAAC;EACXC,MAAM,EAAE,CAAC;EACTC,UAAU,EAAE;AAChB,CAAC;AAED,MAAMC,YAAY,GAAGT,WAAW,CAAC;EAC7BU,IAAI,EAAE,MAAM;EACZR,YAAY;EACZS,QAAQ,EAAC;IACLC,OAAO,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAI;MACvB,MAAMC,IAAI,GAAGF,KAAK,CAACV,IAAI,CAACa,SAAS,CAAEC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EAAE,CAAC;MACzE,IAAGH,IAAI,IAAI,CAAC,EAAC;QACTF,KAAK,CAACV,IAAI,CAACY,IAAI,CAAC,CAACT,QAAQ,IAAE,CAAC;MAChC,CAAC,MAAI;QACD,MAAMc,OAAO,GAAG;UAAC,GAAGN,MAAM,CAACK,OAAO;UAAEb,QAAQ,EAAC;QAAC,CAAC;QAC/CO,KAAK,CAACV,IAAI,CAACkB,IAAI,CAACD,OAAO,CAAC;MAC5B;MAAC;IACL,CAAC;IACDE,UAAUA,CAACT,KAAK,EAAEC,MAAM,EAAC;MACtB,MAAMS,aAAa,GAAIV,KAAK,CAACV,IAAI,CAACqB,MAAM,CAClCC,QAAQ,IAAKA,QAAQ,CAACP,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EACjD,CAAC;MACDL,KAAK,CAACV,IAAI,GAAGoB,aAAa;IAC9B,CAAC;IACDG,WAAW,EAAEA,CAACb,KAAK,EAAEC,MAAM,KAAI;MAC3B,IAAID,KAAK,CAACL,UAAU,EAAE;QAAE;QACpB,MAAMmB,GAAG,GAAGd,KAAK,CAACT,IAAI,CAACY,SAAS,CAAEC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EAAE,CAAC;QACxE,IAAGS,GAAG,IAAI,CAAC,EAAC;UACRd,KAAK,CAACT,IAAI,CAACuB,GAAG,CAAC,CAACrB,QAAQ,IAAE,CAAC;QAC/B,CAAC,MAAI;UACD,MAAMsB,IAAI,GAAG;YAAC,GAAGd,MAAM,CAACK,OAAO;YAAEb,QAAQ,EAAC;UAAC,CAAC;UAC5CO,KAAK,CAACT,IAAI,CAACiB,IAAI,CAACO,IAAI,CAAC;QACzB;QAAC;MACL,CAAC,MAAM;QACH3B,KAAK,CAAC4B,KAAK,CAAC,oCAAoC,CAAC,CAAC,CAAC;MACvD;IACJ,CAAC;;IACDC,iBAAiB,EAAEA,CAACjB,KAAK,EAAEC,MAAM,KAAK;MAAE;MACpCD,KAAK,CAACL,UAAU,GAAGM,MAAM,CAACK,OAAO;IACrC,CAAC;IACDY,cAAcA,CAAClB,KAAK,EAAEC,MAAM,EAAC;MACzB,MAAMkB,aAAa,GAAInB,KAAK,CAACT,IAAI,CAACoB,MAAM,CAClCC,QAAQ,IAAKA,QAAQ,CAACP,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EACjD,CAAC;MACDL,KAAK,CAACT,IAAI,GAAG4B,aAAa;IAC/B,CAAC;IACDC,YAAYA,CAACpB,KAAK,EAAEC,MAAM,EAAC;MACvB,MAAMoB,SAAS,GAAGrB,KAAK,CAACV,IAAI,CAACa,SAAS,CAClCmB,KAAK,IAAIA,KAAK,CAACjB,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EACzC,CAAC;MACD,IAAGL,KAAK,CAACV,IAAI,CAAC+B,SAAS,CAAC,CAAC5B,QAAQ,GAAG,CAAC,EAAC;QAClCO,KAAK,CAACV,IAAI,CAAC+B,SAAS,CAAC,CAAC5B,QAAQ,IAAI,CAAC;MACvC,CAAC,MAAK,IAAGO,KAAK,CAACV,IAAI,CAAC+B,SAAS,CAAC,CAAC5B,QAAQ,KAAK,CAAC,EAAC;QAC1C,MAAMiB,aAAa,GAAIV,KAAK,CAACV,IAAI,CAACqB,MAAM,CACnCW,KAAK,IAAKA,KAAK,CAACjB,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAACD,EAC3C,CAAC;QACDL,KAAK,CAACV,IAAI,GAAGoB,aAAa;QAC1BtB,KAAK,CAACmC,OAAO,CAAC,eAAe,CAAC;MAClC;IACJ,CAAC;IACDC,SAASA,CAACxB,KAAK,EAAEC,MAAM,EAAC;MACpBD,KAAK,CAACV,IAAI,GAAG,EAAE;MACfU,KAAK,CAACN,MAAM,GAAG,CAAC;MAChB;IACJ,CAAC;;IACD+B,SAASA,CAACzB,KAAK,EAAEC,MAAM,EAAC;MACpB,IAAI;QAAEyB,KAAK;QAAEC;MAAc,CAAC,GAAG3B,KAAK,CAACV,IAAI,CAACsC,MAAM,CAC5C,CAACC,SAAS,EAAEP,KAAK,KAAK;QAClB,MAAM;UAAEQ,KAAK;UAAErC;QAAS,CAAC,GAAG6B,KAAK;QACjC,MAAMS,SAAS,GAAGD,KAAK,GAAGrC,QAAQ;QAElCoC,SAAS,CAACH,KAAK,IAAIK,SAAS;QAC5BF,SAAS,CAACF,aAAa,IAAIlC,QAAQ;QAEnC,OAAOoC,SAAS;MACpB,CAAC,EACD;QACIH,KAAK,EAAE,CAAC;QACRC,aAAa,EAAE;MACnB,CACJ,CAAC;MAED3B,KAAK,CAACP,QAAQ,GAAGkC,aAAa;MAC9B3B,KAAK,CAACN,MAAM,GAAGgC,KAAK;IACxB;EACJ;AACJ,CAAC,CAAC;AAEF,OAAO,MAAO;EAAC3B,OAAO;EAAEU,UAAU;EAAEI,WAAW;EAAEK,cAAc;EAAEE,YAAY;EAAEI,SAAS;EAAEC;AAAS,CAAC,GAAG7B,YAAY,CAACoC,OAAO;AAC3H,eAAepC,YAAY,CAACqC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}